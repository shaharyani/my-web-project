<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>בית</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
{% extends "base.html" %}

{% block title %}מסך הבית{% endblock %}

{% block content %}

<!-- Anchor to top -->
<a id="top"></a>

<!-- Cards Container -->
<div class="card-container2" style="margin-bottom: 40px;">
    {% for city in cities %}
        <div class="city-title">
            <a href="{{ url_for('city_page', city_name=city.name) }}">
                <h3>{{ city.title }}</h3>
            </a>
        </div>
    {% endfor %}
</div>

<!-- Modal Dialog -->
<div id="serialModal" style="{% if show_modal %}display:flex{% else %}display:none{% endif %};">
    <div class="modal-content">
        <h2>חיפוש לפי מספר סידורי</h2>

        <form method="POST" action="{{ url_for('home') }}" style="display:flex; flex-direction:column; align-items:center; padding:20px; gap:15px; font-family: 'Rubik', sans-serif;">
            <input
                type="text"
                name="serial"
                placeholder="מספר סידורי"
                required
                style="
                    width: 100%;
                    max-width: 300px;
                    padding: 10px;
                    border-radius: 8px;
                    border: 1px solid #ccc;
                    text-align: center;
                    font-size: 16px;
                    font-family: 'Rubik'
                "
            >

            <div style="display:flex; gap:10px; justify-content:center; width: 100%; max-width: 300px;">
                <button type="submit" class="btn-create-land">
                    חפש
                </button>
                <a href="/" class="btn-cancel-land" style="padding:10px; border-radius:8px; border:1px solid #ccc; background-color:#f0f0f0; color:black; text-align:center; text-decoration:none; display:flex; align-items:center; justify-content:center;">
                    סגור
                </a>
            </div>
        </form>


        {% if show_modal %}
            <hr>
            {% if product %}
                <div style="text-align:right;">
                    <p><b>מספר סידורי:</b> {{ product.serial }}</p>
                    <p><b>קוד:</b> {{ product.code }}</p>
                    <p><b>סוג כרטיס:</b> {{ product.card_type }}</p>
                    <p><b>סוג קרקע:</b> {{ product.land_type }}</p>
                    <p><b>סטטוס:</b> {{ product.status }}</p>
                    <p><b>בעלים:</b> {{ product.owner }}</p>
                </div>
            {% else %}
                <p style="color:red; font-weight:bold;">❌ מוצר לא נמצא</p>
            {% endif %}
        {% endif %}
    </div>
</div>

<!-- Options Panel -->
<div class="options-panel" style="height:10%">
    <div class="buttons-container">
        {% if is_admin %}
            <a class="profile-btn" href="{{ url_for('newItems') }}">
                <img src="{{ url_for('static', filename='images/new_item.png') }}" alt="Cities" title="ערים חדשות">
            </a>
            <a class="profile-btn" href="/">
                <img src="{{ url_for('static', filename='images/status.png') }}" alt="Status" title="מצב כללי">
            </a>
        {% endif %}
        <a class="profile-btn" onclick="document.getElementById('serialModal').style.display='flex';">
            <img src="{{ url_for('static', filename='images/search.png') }}" title="חיפוש מתקדם">
        </a>

        <a class="profile-btn" href="https://gitlab.com/">
            <img src="{{ url_for('static', filename=gitLab_logo | default('gitLab_logo.png')) }}" alt="GitLab" title="GitLab">
        </a>

        <a href="{{ url_for('user_page') }}" class="profile-btn" aria-label="פרופיל">
            <img src="{{ url_for('static', filename=user_photo | default('user_photo.png')) }}" alt="Profile" title="הפרופיל שלך">
        </a>

        <div class="options-title">אפשרויות נוספות</div>
    </div>
</div>

{% endblock %}

{% block scripts %}
</body>
<script>
</script>
{% endblock %}

</html>
